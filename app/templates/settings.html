{% extends "base.html" %}

{% block title %}Settings{% endblock %}

{% block styles %}
  <style>
    .container {
      text-align: left;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      padding: 20px;
    }
    .indent {
      margin-left: 20px;
    }
  </style>
{% endblock %}

{% block content %}
  <form method="post" action="/settings">
    <h1>Settings</h1>

    Click "Save" to apply your changes. Login with Google to save your settings and progress across sessions.

    <br><br>

    <h3>Review Settings</h3>
    <label for="translation">Translation:</label>
    <select name="translation" id="translation">
      {% for trans in avail_translations %}
        <option value="{{ trans }}"
          {% if trans == selected_translation %}selected{% endif %}>
          {{ trans | upper }}
        </option>
      {% endfor %}
    </select>

    <br><br>

    <label>
      <input type="checkbox" name="prioritize_frequency"
            {% if prioritize_frequency %}checked{% endif %}>
      Prioritize verses based on reference frequency in <a href=https://www.gty.org>gty.org</a> sermons and <a href=https://www.desiringgod.org>desiringgod.org</a> resources
    </label>

    <br><br>

    <h3>Review Selection</h3>

    <ul>
      <li>Select testaments, books, and/or chapters to review. If none are selected, defaults to the whole Bible.</li>
      <li>If a testament is selected, all of its books are included. Similarly, if a book is selected, all of its chapters are included. Otherwise, only selected chapters are included.</li>
    </ul>

    <label>
      <input type="checkbox" name="selected_testaments" value="old"
        {% if "old" in selected_testaments %}checked{% endif %}>
      <strong>Old Testament</strong><br><br>
    </label>
    <div class="indent">
      {% for book in ot_books %}
        <label>
          <input type="checkbox" name="selected_books" value="{{ book }}"
            {% if book in selected_books %}checked{% endif %}>
          {{ book }}
        </label>
        {% if book in chapter_counts and chapter_counts[book] > 1 %}
          <div class="indent">
            {% for chapter in range(1, chapter_counts[book] + 1) %}
              <label>
                <input type="checkbox" name="selected_chapters"
                       value="{{ book }}|{{ chapter }}"
                       {% if book in selected_chapters and chapter in selected_chapters[book] %}checked{% endif %}>
                {{ chapter }}
              </label>
            {% endfor %}
          </div>
        {% else %}
          <br>
        {% endif %}
        <br>
      {% endfor %}
    </div>

    <br>
    <label>
      <input type="checkbox" name="selected_testaments" value="new"
        {% if "new" in selected_testaments %}checked{% endif %}>
      <strong>New Testament</strong><br><br>
    </label>
    <div class="indent">
      {% for book in nt_books %}
        <label>
          <input type="checkbox" name="selected_books" value="{{ book }}"
            {% if book in selected_books %}checked{% endif %}>
          {{ book }}
        </label>
        {% if book in chapter_counts and chapter_counts[book] > 1 %}
          <div class="indent">
            {% for chapter in range(1, chapter_counts[book] + 1) %}
              <label>
                <input type="checkbox" name="selected_chapters"
                       value="{{ book }}|{{ chapter }}"
                       {% if book in selected_chapters and chapter in selected_chapters[book] %}checked{% endif %}>
                {{ chapter }}
              </label>
            {% endfor %}
          </div>
        {% else %}
          <br>
        {% endif %}
        <br>
      {% endfor %}
    </div>

    <br>
    <button type="submit" style="font-size: 1em;">Save</button>
  </form>
{% endblock %}
